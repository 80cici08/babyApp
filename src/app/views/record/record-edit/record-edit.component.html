<app-header></app-header>

<div class="container cl-container-padding">
  <form (ngSubmit)="onEditRecord()" #f="ngForm">
    <div class="form-group" required>
      <label for="image-name">Name</label>
      <input type="text" class="form-control" id="image-name" placeholder="Name" name="name"
             [(ngModel)]="record.name"
             required
             [class.is-invalid]="!rname.valid && rname.touched"
             #rname="ngModel">
      <small class="form-text text-danger" *ngIf="!rname.valid && rname.touched">
        Please enter name.
      </small>
    </div>

    <div class="form-group" required>
      <div>
        <label>Type</label>
      </div>
      <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="type" id="inlineRadio1" [(ngModel)]="record.type" value="Image">
        <label class="form-check-label" for="inlineRadio1">Image</label>
      </div>
      <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="type" id="inlineRadio2" [(ngModel)]="record.type" value="Video">
        <label class="form-check-label" for="inlineRadio2">Video</label>
      </div>
    </div>

    <div class="form-group">
      <label for="image-URL">URL</label>
      <input type="text" class="form-control" id="image-URL" placeholder="URL" name="url" [(ngModel)]="record.url">
    </div>

    <div class="form-group" *ngIf="record.type==='Image'">
      <form ngNoForm action="{{baseUrl}}/api/upload" method="post" enctype="multipart/form-data">
        <label>Upload</label>
        <div class="form-inline">
          <input name="myFile" type="file" class="form-control"/>
          <input name="widgetId" value="{{recordId}}" style="display: none"/>
          <input name="userId" value="{{userId}}" style="display: none"/>
          <button type="submit" class="btn btn-info ml-2">Upload Image</button>
        </div>
      </form>
    </div>

    <div class="form-group">
      <label>Location</label>
      <!--<input type="text" class="form-control" id="location">-->
      <div>
        <input class="search form-control" ngx-google-places-autocomplete #placesRef="ngx-places"
               (onAddressChange)="handleAddressChange($event)"/>
        <agm-map [latitude]="record.latitude" [longitude]="record.longitude" (mapClick)="onChoseLocation($event)">
          <agm-marker *ngIf="locationChosen" [latitude]="record.latitude" [longitude]="record.longitude"></agm-marker>
        </agm-map>
      </div>
    </div>
    <div class="form-group">
      <label for="recordTime">Record time or Upload time</label>
      <input type="date" class="form-control" id="recordTime" name="date" [(ngModel)]="record.date">
    </div>
    <button [disabled]="!f.valid" class="btn btn-info mr-2" type="submit">Save</button>
    <button class="btn btn-danger" (click)="onDeleteRecord()">Delete</button>
  </form>
</div>

<app-footer></app-footer>
